# 主成分分析 (PCA;　Principal Component Analysys)

高次元データを低次元に圧縮して主要な特徴量を引き抜く可視化等をする．
ここではデータは標準化されているとする．

## 使用する文字
* $x$　・・・ $D$ 次元データ
* $X$  ・・・ データを行ベクトルで縦に並べたもの $N\times D$行列
* $S = \frac{1}{N} \sum_n x^{(n)} x^{(n)T} = \frac{1}{N}X^T X$ ・・・サンプル共分散行列. $D\times D$ 行列

## PCAの定式化
PCAはサンプル共分散行列についての固有方程式を解くことになる．それを簡単に見てゆく．



$D$ 次元データ $x$ を次の形で $\{ u_{m} \}$ で貼られる $M$ 低次元空間に落とす.超平面に直交射影するイメージ．

$$
\begin{align*}
    \begin{pmatrix}
        y_1 & y_2 & \cdots & y_{M}
    \end{pmatrix}
    &=
    x^T
    \begin{pmatrix}
        u_1 & u_2 & \cdots & u_{M}
    \end{pmatrix}\\
    Y &= X U
\end{align*}
$$

結果としてサンプル共分散行列 $S$ の固有値を大きい方からえらび，それに最小にするベクトルを選択する．

$$
    S u_{m} = \lambda_{m} u_{m}
$$


## 主成分世界における元の要素の関連ぐあい

とりあえずPCAを行うだけでなく，元の要素が第1主成分，第2主成分にどれくらい含まれるかを調べることも大事．可視化などで使える．

第1主成分に含まれる元の $d$ 個目の要素が含まれるウェイトは $u_{1,d}$ である．これが大いとき，データをよく説明する．

ここまでは ベクトル $u_1, u_2$ と 行列 $U$ を縦に見たが，横に見ることも多い．

例えば $M = 2$ 次元平面に落とすことで元の各成分が(第1主成分，第2主成分)ベクトルにどれぐらい寄与するかを見る．